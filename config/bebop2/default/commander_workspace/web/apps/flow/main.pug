extends ../../../web_includes/common/layout

block includes
  include ../../../web_includes/common/common_includes.pug

block header
        i.fa-fw.fa.fa-signal
        | Optical Flow Estimator

block main
  .row
    article.col-xs-12.col-sm-12.col-md-6.col-lg-4
      #wid-FLOW-CmdAndData.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
        header
          span.widget-icon
            i.fa.fa-table
          h2 Command and Data Handling
        div
          .jarviswidget-editbox
            input.form-control(type='text')
          .widget-body
            .table-responsive
              table.table.table-condensed
                tbody
                  tr
                    th Timestamp
                    td
                      span.sage-tlm(data-sage={tlm:[{name:'/CFS/FLOW/Timestamp'}]}) ---
                  tr
                    th Cmd Count
                    td
                      span.sage-tlm(data-sage={tlm:[{name:'/CFS/FLOW/CmdCounter'}]}) ---
                  tr
                    th Error Count
                    td
                      span(data-sage={tlm:[{name:'/CFS/FLOW/ErrCounter'}]}) ---   
                  tr
                    th Quality
                    td
                      span(data-sage={tlm:[{name:'/CFS/FLOW/Quality'}]}) --- 
                  tr
                    th Pixel Flow X
                    td
                      span.sage-tlm(data-sage={tlm:[{name:'/CFS/FLOW/PixelFlowX',format:'%.4f'}]}) ---
                  tr
                    th Pixel Flow Y
                    td
                      span.sage-tlm(data-sage={tlm:[{name:'/CFS/FLOW/PixelFlowY',format:'%.4f'}]}) ---
                  tr
                    th Angular Flow X
                    td
                      span(data-sage={tlm:[{name:'/CFS/FLOW/AngularFlowX',format:'%.4f'}]}) ---   
                  tr
                    th Angular Flow Y
                    td
                      span(data-sage={tlm:[{name:'/CFS/FLOW/AngularFlowY',format:'%.4f'}]}) --- 
                  tr
                    th Gyro Rate Integral X
                    td
                      span.sage-tlm(data-sage={tlm:[{name:'/CFS/FLOW/GyroXRateIntegral',format:'%.4f'}]}) ---
                  tr
                    th Gyro Rate Integral Y
                    td
                      span(data-sage={tlm:[{name:'/CFS/FLOW/GyroYRateIntegral',format:'%.4f'}]}) ---   
                  tr
                    th Gyro Rate Integral Z
                    td
                      span(data-sage={tlm:[{name:'/CFS/FLOW/GyroZRateIntegral',format:'%.4f'}]}) --- 
            footer
              button.btn.btn-primary(data-sage={cmd:{name:'/CFS/FLOW/NoOp'}}) No-Op
              button.btn.btn-primary(data-sage={cmd:{name:'/CFS/FLOW/Reset'}}) Reset            
    article.col-xs-10.col-sm-6.col-md-6.col-lg-6
      #wid-SM.jarviswidget.jarviswidget-color-blueDark(data-widget-editbutton='false')
        header(style="overflow:hidden;")
          span.widget-icon
            i.fa.fa-table
          h2 PixelFlow
        div
          .jarviswidget-editbox
            input.form-control(type='text')
          .widget-body
            #PixelFlow(style='width:100%; height:300px;')

                      
              

                                        

    
  .row
    +app_specific_application_control("FLOW") 
    +registered_applications() 
  

    script.
        $(function () {
            var PixelFlow = {
                'data': [
                    { 'tlm':{'name': '/CFS/FLOW/PixelFlowX'},
                      'label': 'X',
                      'color': '#ff00ff'
                    },
                    { 'tlm':{'name': '/CFS/FLOW/PixelFlowY'},
                      'label': 'Y',
                      'color': '#ffff00'
                    }
                ]
            };


            var PixelFlowPlot = new SageTimeSeriesDataplot($('#PixelFlow'), PixelFlow);

        });
