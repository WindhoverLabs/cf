extends ../../layout

block header
  style.
    .nav-tabs > li .close {
      margin: -2px 0 0 10px;
      font-size: 18px;
    }
    
  .row
    article.col-xs-12.col-sm-12.col-md-12.col-lg-12
      #wid-id-0.jarviswidget(data-widget-editbutton='false')
        header
          ul#widget-tab-navtab.nav.nav-tabs
            li.active
              a(data-toggle='tab' href='#tabNav') 
                i.fa.fa-lg.fa-arrow-circle-o-down
                span.hidden-mobile.hidden-tablet File Browser
        div
          .jarviswidget-editbox
          .widget-body.no-padding
            #widget-tab-content.tab-content.padding-10
              #tabNav.tab-pane.fade.in.active
                #FileBrowserContainer      
                
               
  script(type='text/javascript').    
    /* remove previous elems */
    if($('.DTTT_dropdown.dropdown-menu').length){
        $('.DTTT_dropdown.dropdown-menu').remove();
    }
    
    // Needed if you are rendering multiple tables in ajax version
    //var tableDestroyer = [];

    var oFileBrowser;
    
    // pagefunction 
    var pagefunction = function() {        
        /* // DOM Position key index //
        
            l - Length changing (dropdown)
            f - Filtering input (search)
            t - The Table! (datatable)
            i - Information (records)
            p - Pagination (paging)
            r - pRocessing 
            < and > - div elements
            <"#id" and > - div with an id
            <"class" and > - div with a class
            <"#id.class" and > - div with an id and class
            
            Also see: http://legacy.datatables.net/usage/features
        */  
        
        oFileBrowser = $('#FileBrowser').DataTable({
            "bFilter": true,
            "bInfo": true,
            "bLengthChange": true,
            "bAutoWidth": true,
            "bPaginate": true,
            "bStateSave": true,
            "oTableTools": {
                 "aButtons": [
                 "copy",
                 "csv",
                 "xls",
                    {
                        "sExtends": "pdf",
                        "sTitle": "PDF",
                        "sPdfMessage": "PDF Export",
                        "sPdfSize": "letter"
                    },
                    {
                        "sExtends": "print",
                        "sMessage": "Generated by Sage <i>(press Esc to close)</i>"
                    }
                 ],
                "sSwfPath": "js/plugin/datatables/swf/copy_csv_xls_pdf.swf"
            },
            "columnDefs": [
                {
                    "targets": [ 0 ],
                    "sortable": false
                },
                {
                    "targets": [ 1 ],
                    "type": "numeric"
                },
                {
                    "targets": [ 2 ],
                    "type": "date",
                    "sortable": false
                },
                {
                    "targets": [ 4 ],
                    "visible": false,
                    "searchable": false
                }
            ],
            "sDom": "<'dt-toolbar'<'col-xs-8'f><'col-xs-2'T><'col-xs-2'l>r>"+
                    "t"+
                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>",
        });
                       
        // Apply the filter
        $("#FileBrowser thead th input[type=text]").on( 'keyup change', function () { 
            oFileBrowser
                .column( $(this).parent().index()+':visible' )
                .search( this.value )
                .draw();
                
        });
        
        $("#FileBrowser thead th input[type=text]").on( 'keyup change', function () { 
            oFileBrowser
                .column( $(this).parent().index()+':visible' )
                .search( this.value )
                .draw();
                
        } );
        
        $('#FileBrowser tbody').on('click', 'tr', function () {
            var browser = $('#FileBrowser').dataTable();
            var aPos = browser.fnGetPosition(this); 
            var fullName = browser.fnGetData(aPos)[4]; 
            var fileName = browser.fnGetData(aPos)[3]; 

            console.log(fullName);
            
            sage.callFunc('CfeLP_GetReport', {FileName:fullName}, function(err, resp) {
                if(resp != undefined)
                {
                    var mainTabID = 'tab-' + tabID;
                    tabID++;
                    var entryTblID;
                    
                    switch(resp.Header.SubType)
                    {
                      case 'CFE_ES_ERLOG':
                      {    
                        for(var i = 0; i < resp.LogEntries.length; i++)
                        {   
                          var entryTabID = 'tab-' + tabID;
                          tabID++;
                          resp.LogEntries[i].TabID = entryTabID;
                        }
                        break
                      }
                        
                      case 'CFE_ES_SYSLOG':
                      {
                        break;
                      }
                      
                      case 'CFE_ES_QUERYALL':
                      {    
                        for(var i = 0; i < resp.AppInfo.length; i++)
                        {  
                          var entryTabID = 'tab-' + tabID;
                          tabID++;
                          resp.AppInfo[i].TabID = entryTabID;
                        }
                        break
                      }
                      
                      case 'CFE_SB_PIPEDATA':
                      {    
                        for(var i = 0; i < resp.PipeData.length; i++)
                        {  
                          var entryTabID = 'tab-' + tabID;
                          tabID++;
                          resp.PipeData[i].TabID = entryTabID;
                        }
                        break
                      }
                      
                      case 'CFE_SB_ROUTEDATA':
                      {    
                        for(var i = 0; i < resp.RouteData.length; i++)
                        {  
                          var entryTabID = 'tab-' + tabID;
                          tabID++;
                          resp.RouteData[i].TabID = entryTabID;
                        }
                        break;
                      }
                      
                      case 'CFE_SB_MAPDATA':
                      case 'CFE_ES_CDS_REG':
                      case 'CFE_ES_QUERYALLTASKS':
                      {
                          entryTblID = 'tbl-' + tabID;
                          tabID++;
                          resp.TableID = entryTblID;
                          break;
                      }
                      
                      case 'CFE_EVS_APPDATA':
                      {
                          entryAccID = 'acc-' + tabID;
                          tabID++;
                          resp.AccordionID = entryAccID;
                          
                          for(var i = 0; i < resp.AppData.length; i++)
                          {  
                            var entryColID = 'col-' + tabID;
                            tabID++;
                            resp.AppData[i].CollapseID = entryColID;
                          
                            var entryTableID = 'tbl-' + tabID;
                            tabID++;
                            resp.AppData[i].TableID = entryTableID;
                          }
                          
                          break;
                      }
                    }
                    
                    console.log(resp);
                    
                    var tab = addTab( mainTabID, fileName, LogReport(resp) );
                    
                    switch(resp.Header.SubType)
                    {
                      case 'CFE_SB_MAPDATA':
                      {
                        oNewReport = $('#' + entryTblID).DataTable({
                            "bFilter": true,
                            "bInfo": true,
                            "bLengthChange": true,
                            "bAutoWidth": true,
                            "bPaginate": true,
                            "bStateSave": true,
                            "oTableTools": {
                                 "aButtons": [
                                 "copy",
                                 "csv",
                                 "xls",
                                    {
                                        "sExtends": "pdf",
                                        "sTitle": "PDF",
                                        "sPdfMessage": "PDF Export",
                                        "sPdfSize": "letter"
                                    },
                                    {
                                        "sExtends": "print",
                                        "sMessage": "Generated by Sage <i>(press Esc to close)</i>"
                                    }
                                 ],
                                "sSwfPath": "js/plugin/datatables/swf/copy_csv_xls_pdf.swf"
                            },
                            "columnDefs": [
                                {
                                    "targets": [ 0 ],
                                    "sortable": true,
                                    "type": "numeric"
                                },
                                {
                                    "targets": [ 1 ],
                                    "sortable": true,
                                    "type": "numeric"
                                }
                            ],
                            "sDom": "<'dt-toolbar'<'col-xs-8'f><'col-xs-2'T><'col-xs-2'l>r>"+
                                    "t"+
                                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>",
                        });
                                       
                        // Apply the filter
                        $("#" + entryTblID + " thead th input[type=text]").on( 'keyup change', function () { 
                            oNewReport
                                .column( $(this).parent().index()+':visible' )
                                .search( this.value )
                                .draw();        
                        });
                        
                        $("#" + entryTblID + " thead th input[type=text]").on( 'keyup change', function () { 
                            oNewReport
                                .column( $(this).parent().index()+':visible' )
                                .search( this.value )
                                .draw();
                                
                        } );
                        
                        break;
                      }
                      
                      case 'CFE_ES_CDS_REG':
                      {
                        oNewReport = $('#' + entryTblID).DataTable({
                            "bFilter": true,
                            "bInfo": true,
                            "bLengthChange": true,
                            "bAutoWidth": true,
                            "bPaginate": true,
                            "bStateSave": true,
                            "oTableTools": {
                                 "aButtons": [
                                 "copy",
                                 "csv",
                                 "xls",
                                    {
                                        "sExtends": "pdf",
                                        "sTitle": "PDF",
                                        "sPdfMessage": "PDF Export",
                                        "sPdfSize": "letter"
                                    },
                                    {
                                        "sExtends": "print",
                                        "sMessage": "Generated by Sage <i>(press Esc to close)</i>"
                                    }
                                 ],
                                "sSwfPath": "js/plugin/datatables/swf/copy_csv_xls_pdf.swf"
                            },
                            "columnDefs": [
                                {
                                    "targets": [ 0 ],
                                    "sortable": true,
                                },
                                {
                                    "targets": [ 2 ],
                                    "sortable": true,
                                    "type": "numeric"
                                },
                                {
                                    "targets": [ 3 ],
                                    "sortable": true,
                                }
                            ],
                            "sDom": "<'dt-toolbar'<'col-xs-8'f><'col-xs-2'T><'col-xs-2'l>r>"+
                                    "t"+
                                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>",
                        });
                                       
                        // Apply the filter
                        $("#" + entryTblID + " thead th input[type=text]").on( 'keyup change', function () { 
                            oNewReport
                                .column( $(this).parent().index()+':visible' )
                                .search( this.value )
                                .draw();        
                        });
                        
                        $("#" + entryTblID + " thead th input[type=text]").on( 'keyup change', function () { 
                            oNewReport
                                .column( $(this).parent().index()+':visible' )
                                .search( this.value )
                                .draw();
                                
                        } );
                        
                        break;
                      }
                      
                      case 'CFE_ES_QUERYALLTASKS':
                      {
                        oNewReport = $('#' + entryTblID).DataTable({
                            "bFilter": true,
                            "bInfo": true,
                            "bLengthChange": true,
                            "bAutoWidth": true,
                            "bPaginate": true,
                            "bStateSave": true,
                            "oTableTools": {
                                 "aButtons": [
                                 "copy",
                                 "csv",
                                 "xls",
                                    {
                                        "sExtends": "pdf",
                                        "sTitle": "PDF",
                                        "sPdfMessage": "PDF Export",
                                        "sPdfSize": "letter"
                                    },
                                    {
                                        "sExtends": "print",
                                        "sMessage": "Generated by Sage <i>(press Esc to close)</i>"
                                    }
                                 ],
                                "sSwfPath": "js/plugin/datatables/swf/copy_csv_xls_pdf.swf"
                            },
                            "columnDefs": [
                                {
                                    "targets": [ 0 ],
                                    "sortable": true,
                                },
                                {
                                    "targets": [ 1 ],
                                    "sortable": true,
                                },
                                {
                                    "targets": [ 2 ],
                                    "sortable": true,
                                    "type": "numeric"
                                },
                                {
                                    "targets": [ 3 ],
                                    "type": "numeric"
                                }
                            ],
                            "sDom": "<'dt-toolbar'<'col-xs-8'f><'col-xs-2'T><'col-xs-2'l>r>"+
                                    "t"+
                                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>",
                        });
                                       
                        // Apply the filter
                        $("#" + entryTblID + " thead th input[type=text]").on( 'keyup change', function () { 
                            oNewReport
                                .column( $(this).parent().index()+':visible' )
                                .search( this.value )
                                .draw();        
                        });
                        
                        $("#" + entryTblID + " thead th input[type=text]").on( 'keyup change', function () { 
                            oNewReport
                                .column( $(this).parent().index()+':visible' )
                                .search( this.value )
                                .draw();
                                
                        } );
                        
                        break;
                      }
                      
                      case 'CFE_EVS_APPDATA':
                      {
                        for(var i = 0; i < resp.AppData.length; i++)
                        {  
                          entryTblID = resp.AppData[i].TableID;
                        
                          oNewReport = $('#' + entryTblID).DataTable({
                              "bFilter": true,
                              "bInfo": true,
                              "bLengthChange": true,
                              "bAutoWidth": true,
                              "bPaginate": true,
                              "bStateSave": true,
                              "oTableTools": {
                                   "aButtons": [
                                   "copy",
                                   "csv",
                                   "xls",
                                      {
                                          "sExtends": "pdf",
                                          "sTitle": "PDF",
                                          "sPdfMessage": "PDF Export",
                                          "sPdfSize": "letter"
                                      },
                                      {
                                          "sExtends": "print",
                                          "sMessage": "Generated by Sage <i>(press Esc to close)</i>"
                                      }
                                   ],
                                  "sSwfPath": "js/plugin/datatables/swf/copy_csv_xls_pdf.swf"
                              },
                              "sDom": "<'dt-toolbar'<'col-xs-8'f><'col-xs-2'T><'col-xs-2'l>r>"+
                                      "t"+
                                      "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>",
                          });
                                       
                          // Apply the filter
                          $("#" + entryTblID + " thead th input[type=text]").on( 'keyup change', function () { 
                              oNewReport
                                  .column( $(this).parent().index()+':visible' )
                                  .search( this.value )
                                  .draw();        
                          });
                        
                          $("#" + entryTblID + " thead th input[type=text]").on( 'keyup change', function () { 
                              oNewReport
                                  .column( $(this).parent().index()+':visible' )
                                  .search( this.value )
                                  .draw();          
                          } );
                        }
                        break;
                      }
                      
                    }
                    
                    tab.find('a').tab('show');
                    registerCloseEvent();
                }
            }); 
        });
    };


    var tabID = 1;
    
    loadScript("js/plugin/datatables/jquery.dataTables.min.js", function(){
        loadScript("js/plugin/datatables/dataTables.colVis.min.js", function(){
            loadScript("js/plugin/datatables/dataTables.tableTools.min.js", function(){
                loadScript("js/plugin/datatables/dataTables.bootstrap.min.js", pagefunction);
            });
        });
    });
    
    addTab = function(id, label, content ){
        var nav     = $('#widget-tab-navtab');  // ID of your nav-tabs element
        var tabs    = $('#widget-tab-content'); // ID of your tab-content element

        var new_tab = $('<div>').addClass( 'tab-pane fade in').attr('id', id).append( content );
        //var new_li  = $('<li>').append( $('<a>').attr('href', "#" + id).attr('data-toggle', 'tab').append( label ) );
        var new_li  = $('<li>').append( $('<a>').attr('href', "#" + id).attr('data-toggle', 'tab').append($('<button>').addClass('close closeTab').attr('type', 'button').append('×')).append(label ) );
        //$('.nav-tabs').append('<li><a href="#' + tabId + '"><button class="close closeTab" type="button" >×</button>Compose</a></li>');

        tabs.append( new_tab );
        nav.append( new_li );

        return new_li;
    }
    
    DirectoryListing_Template = "" +
      "<table id='FileBrowser' class='table table-striped table-bordered table-hover' width='100%'>" +
      "  <thead>" +
      "    <tr>" +
      "      <th style='width: 50px'></th>" +
      "      <th style='width: 50px'></th>" +
      "      <th style='width: 200px'></th>" +
      "      <th class='hasinput' >" +
      "        <input style='form-control' type='text' placeholder='Filter Name'>" +
      "      </th>" +
      "      <th></th>" +
      "    </tr>" +
      "    <tr>" +
      "      <th>Type</th>" +
      "      <th>Size</th>" +
      "      <th>Created</th>" +
      "      <th>Name</th>" +
      "      <th>FullPath</th>" +
      "    </tr>" +
      "  <tbody>" +
      "    {{#each .}}" +
      "      <tr>" +
      "        <td>{{#ifCond isdir '==' true }}DIR{{else}}FILE{{/ifCond}}</td>" +
      "        <td>{{size}}</td>" +
      "        <td>{{mtime}}</td>" +
      "        <td>{{name}}</td>" +
      "        <td>{{name}}</td>" +
      "      </tr>" +
      "    {{/each}}" +
      "  </tbody>" +
      "</table>";     
      
    DirectoryListing = Handlebars.compile(DirectoryListing_Template);
    
    LogReport_Template = "" +
    "<div class='table-responsive'>" +
    "  <table class='table table-condensed'>" +
    "    <tbody>" +
    "      <tr>" +
    "        <th width='150px'>SubType</th>" +
    "        <td>{{Header.SubType}}</td>" +
    "      </tr>" +
    "      <tr>" +
    "        <th>Length</th>" +
    "        <td>{{Header.Length}}</td>" +
    "      </tr>" +
    "      <tr>" +
    "        <th>SpacecraftID</th>" +
    "        <td>{{Header.SpacecraftID}}</td>" +
    "      </tr>" +
    "      <tr>" +
    "        <th>ProcessorID</th>" +
    "        <td>{{Header.ProcessorID}}</td>" +
    "      </tr>" +
    "      <tr>" +
    "        <th>ApplicationID</th>" +
    "        <td>{{Header.ApplicationID}}</td>" +
    "      </tr>" +
    "      <tr>" +
    "        <th>Timestamp</th>" +
    "        <td>{{time_cfe_to_js Header.TimeSeconds Header.TimeSubseconds}}</td>" +
    "      </tr>" +
    "      <tr>" +
    "        <th>Description</th>" +
    "        <td>{{Header.Description}}</td>" +
    "      </tr>" +
    "      <tr>" +
    "        <th>Detail</th>" +
    "        <td>" +
    "          {{report_detail .}}" +
    "        </td>" +
    "      </tr>" +
    "    </tbody>" +
    "  </table>" 
      
    LogReport = Handlebars.compile(LogReport_Template);
    
    LogEntryTabs_Template = "" +
    "<ul class='nav nav-tabs tabs-left' id='demo-pill-nav'>" +
    "  {{#each LogEntries}}" +  
    "    <li>" +
    "      <a href='\#{{TabID}}' data-toggle='tab'><span class='badge {{#ifCond LogEntryType '==' 0 }}bg-color-gray{{else}}bg-color-green{{/ifCond}} txt-color-white'>{{LogEntryType}}</span> {{@index}}</a>" +
    "    </li>" +
    "  {{/each}}" +
    "</ul>" 

    LogEntryTabs_Rpt = Handlebars.compile(LogEntryTabs_Template);

    
    CFE_ES_ERLOG_Template = "" +
    "<div class='tabs-left'>" +
    "  {{report_detail_nav_tabs .}}" +
    "  <div class='tab-content'>" +
    "    {{#each LogEntries}}" +
    "      <div class='tab-pane {{#if @first}} active{{/if}}' id='{{TabID}}'>" +
    "        <div class='table-responsive'>" +
    "          <table class='table table-condensed'>" +
    "            <tbody>" +
    "              <tr>" +
    "                <th width='175px'>Entry Type</th>" +
    "                <td>{{LogEntryType}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Reset Type</th>" +
    "                <td>{{ResetType}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Reset SubType</th>" +
    "                <td>{{ResetSubType}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Boot Source</th>" +
    "                <td>{{BootSource}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Proc Reset Cnt</th>" +
    "                <td>{{ProcessorResetCount}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Max Proc Reset Cnt</th>" +
    "                <td>{{MaxProcessorResetCount}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Debug Flag</th>" +
    "                <td>{{DebugFlag}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>WD Write</th>" +
    "                <td>{{WatchdogWriteFlag}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Printf Enabled</th>" +
    "                <td>{{PrintfEnabledFlag}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Last App ID</th>" +
    "                <td>{{LastAppId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Timestamp</th>" +
    "                <td>{{time_cfe_to_js Seconds Subseconds}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Description</th>" +
    "                <td>{{Description}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Context Present</th>" +
    "                <td>{{ContextIsPresent}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>AppID</th>" +
    "                <td>{{AppID}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Context</th>" +
    "                <td>{{Context}}</td>" +
    "              </tr>" +
    "            </tbody>" +
    "          </table>" +
    "        </div>" +
    "      </div>" +
    "    {{/each}}" +
    "  </div>" +    
    "</div>";

    CFE_ES_ERLOG_Rpt = Handlebars.compile(CFE_ES_ERLOG_Template);
   
   
    CFE_ES_SYSLOG_Template = "" +
    "{{OutputErSysLog Log}}"

    CFE_ES_SYSLOG_Rpt = Handlebars.compile(CFE_ES_SYSLOG_Template);
    
    Handlebars.registerHelper('OutputErSysLog', function(log) {
      return new Handlebars.SafeString( log.replace(/\r\n?|\n/g, '<br />'));
    });
    
    
    function registerCloseEvent() {
      $(".closeTab").click(function () {
        //there are multiple elements which has .closeTab icon so close the tab whose close icon is clicked
        var tabContentId = $(this).parent().attr("href");
        $(this).parent().parent().remove(); //remove li of tab
        $(tabContentId).remove(); //remove respective tab content
        $('#widget-tab-navtab a:last').tab('show'); // Select first tab
      });
    };
    
    var CFE_ES_ERLOG_Rpt;
    
    Handlebars.registerHelper('time_cfe_to_js', function(sec, subsec) {
      return new Handlebars.SafeString(CfeTimeToJsTime(sec, subsec));
    });
    
    Handlebars.registerHelper('report_detail', function(context) {
      switch(context.Header.SubType)
      {
        case 'CFE_ES_ERLOG':
          return new Handlebars.SafeString(CFE_ES_ERLOG_Rpt(context));
          break;
          
        case 'CFE_ES_SYSLOG':
          return new Handlebars.SafeString(CFE_ES_SYSLOG_Rpt(context));
          break;
          
        case 'CFE_ES_QUERYALL':
          return new Handlebars.SafeString(CFE_ES_QUERYALL_Rpt(context));
          break;
          
        case 'CFE_SB_PIPEDATA':
          return new Handlebars.SafeString(CFE_SB_PIPEDATA_Rpt(context));
          break;
          
        case 'CFE_SB_ROUTEDATA':
          return new Handlebars.SafeString(CFE_SB_ROUTEDATA_Rpt(context));
          break;
          
        case 'CFE_SB_MAPDATA':
          return new Handlebars.SafeString(CFE_SB_MAPDATA_Rpt(context));
          break;
          
        case 'CFE_ES_CDS_REG':
          return new Handlebars.SafeString(CFE_ES_CDS_REG_Rpt(context));
          break;
          
        case 'CFE_ES_QUERYALLTASKS':
          return new Handlebars.SafeString(CFE_ES_TASKINFO_Rpt(context));
          break;
          
        case 'CFE_EVS_APPDATA':
          return new Handlebars.SafeString(CFE_EVS_APPDATA_Rpt(context));
          break;
      }
    });
    
    Handlebars.registerHelper('report_detail_nav_tabs', function(context) {
      return new Handlebars.SafeString(LogEntryTabs_Rpt(context));
    });
    
    sage.callFunc('CfeLP_GetDir', {DirPath:'.'}, function(err, resp) {
      console.log(resp);
      $('#FileBrowserContainer').append(DirectoryListing(resp));
    });
    
    
    
    AppInfoLogEntryTabs_Template = "" +
    "<ul class='nav nav-tabs tabs-left' id='demo-pill-nav'>" +
    "  {{#each AppInfo}}" +  
    "    <li>" +
    "      <a href='\#{{TabID}}' data-toggle='tab'><span class='badge {{#ifCond Type '==' 0 }}bg-color-gray{{else}}bg-color-green{{/ifCond}} txt-color-white'>{{@index}}</span> {{Name}}</a>" +
    "    </li>" +
    "  {{/each}}" +
    "</ul>" 

    AppInfoEntryTabs_Rpt = Handlebars.compile(AppInfoLogEntryTabs_Template);

    CFE_ES_QUERYALL_Template = "" +
    "<div class='tabs-left'>" +
    "  {{queryall_detail_nav_tabs .}}" +
    "  <div class='tab-content'>" +
    "    {{#each AppInfo}}" +
    "      <div class='tab-pane {{#if @first}} active{{/if}}' id='{{TabID}}'>" +
    "        <div class='table-responsive'>" +
    "          <table class='table table-condensed'>" +
    "            <tbody>" +
    "              <tr>" +
    "                <th width='175px'>App ID</th>" +
    "                <td>{{AppId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Type</th>" +
    "                <td>{{Type}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Name</th>" +
    "                <td>{{Name}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Entry Point</th>" +
    "                <td>{{EntryPoint}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>File Name</th>" +
    "                <td>{{FileName}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Stack Size</th>" +
    "                <td>{{StackSize}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Module ID</th>" +
    "                <td>{{ModuleId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Addresses Are Valid</th>" +
    "                <td>{{AddressesAreValid}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Code Address</th>" +
    "                <td>{{CodeAddress}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Code Size</th>" +
    "                <td>{{CodeSize}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Data Address</th>" +
    "                <td>{{DataAddress}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Data Size</th>" +
    "                <td>{{DataSize}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>BSS Address</th>" +
    "                <td>{{BSSAddress}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>BSS Size</th>" +
    "                <td>{{BSSSize}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Start Address</th>" +
    "                <td>{{StartAddress}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Exception Action</th>" +
    "                <td>{{ExceptionAction}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Priority</th>" +
    "                <td>{{Priority}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Main Task ID</th>" +
    "                <td>{{MainTaskId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Execution Counter</th>" +
    "                <td>{{ExecutionCounter}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Main Task Name</th>" +
    "                <td>{{MainTaskName}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Num Of Child Tasks</th>" +
    "                <td>{{NumOfChildTasks}}</td>" +
    "              </tr>" +
    "            </tbody>" +
    "          </table>" +
    "        </div>" +
    "      </div>" +
    "    {{/each}}" +
    "  </div>" +    
    "</div>";

    CFE_ES_QUERYALL_Rpt = Handlebars.compile(CFE_ES_QUERYALL_Template);
  
    Handlebars.registerHelper('queryall_detail_nav_tabs', function(context) {
      return new Handlebars.SafeString(AppInfoEntryTabs_Rpt(context));
    });
    

    
    /***************************************************/
    /*                 CFE_SB_PIPEDATA                 */
    /***************************************************/
    PipeDataLogEntryTabs_Template = "" +
    "<ul class='nav nav-tabs tabs-left' id='demo-pill-nav'>" +
    "  {{#each PipeData}}" +  
    "    <li>" +
    "      <a href='\#{{TabID}}' data-toggle='tab'><span class='badge bg-color-green txt-color-white'>{{@index}}</span> {{Name}}</a>" +
    "    </li>" +
    "  {{/each}}" +
    "</ul>" 

    PipeDataEntryTabs_Rpt = Handlebars.compile(PipeDataLogEntryTabs_Template);

    CFE_SB_PIPEDATA_Template = "" +
    "<div class='tabs-left'>" +
    "  {{pipedata_detail_nav_tabs .}}" +
    "  <div class='tab-content'>" +
    "    {{#each PipeData}}" +
    "      <div class='tab-pane {{#if @first}} active{{/if}}' id='{{TabID}}'>" +
    "        <div class='table-responsive'>" +
    "          <table class='table table-condensed'>" +
    "            <tbody>" +
    "              <tr>" +
    "                <th width='175px'>In Use</th>" +
    "                <td>{{InUse}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Pipe ID</th>" +
    "                <td>{{PipeId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>App Name</th>" +
    "                <td>{{AppName}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>App ID</th>" +
    "                <td>{{AppId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Sys Queue ID</th>" +
    "                <td>{{SysQueueId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Last Sender</th>" +
    "                <td>{{LastSender}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Queue Depth</th>" +
    "                <td>{{QueueDepth}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Send Errors</th>" +
    "                <td>{{SendErrors}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Current Buffer Address</th>" +
    "                <td>{{CurrentBuffAddr}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Trash Buffer Address</th>" +
    "                <td>{{ToTrashBuffAddr}}</td>" +
    "              </tr>" +
    "            </tbody>" +
    "          </table>" +
    "        </div>" +
    "      </div>" +
    "    {{/each}}" +
    "  </div>" +    
    "</div>";

    CFE_SB_PIPEDATA_Rpt = Handlebars.compile(CFE_SB_PIPEDATA_Template);
  
    Handlebars.registerHelper('pipedata_detail_nav_tabs', function(context) {
      return new Handlebars.SafeString(PipeDataEntryTabs_Rpt(context));
    });
    

    
    /***************************************************/
    /*                CFE_SB_ROUTEDATA                 */
    /***************************************************/
    RouteDataLogEntryTabs_Template = "" +
    "<ul class='nav nav-tabs tabs-left' id='demo-pill-nav'>" +
    "  {{#each RouteData}}" +  
    "    <li>" +
    "      <a href='\#{{TabID}}' data-toggle='tab'><span class='badge bg-color-green txt-color-white'>{{@index}}</span> {{Name}}</a>" +
    "    </li>" +
    "  {{/each}}" +
    "</ul>" 

    RouteDataEntryTabs_Rpt = Handlebars.compile(RouteDataLogEntryTabs_Template);

    CFE_SB_ROUTEDATA_Template = "" +
    "<div class='tabs-left'>" +
    "  {{routedata_detail_nav_tabs .}}" +
    "  <div class='tab-content'>" +
    "    {{#each RouteData}}" +
    "      <div class='tab-pane {{#if @first}} active{{/if}}' id='{{TabID}}'>" +
    "        <div class='table-responsive'>" +
    "          <table class='table table-condensed'>" +
    "            <tbody>" +
    "              <tr>" +
    "                <th width='175px'>In Use</th>" +
    "                <td>{{MsgId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Pipe ID</th>" +
    "                <td>{{PipeId}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>State</th>" +
    "                <td>{{State}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Msg Count</th>" +
    "                <td>{{MsgCnt}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>App Name</th>" +
    "                <td>{{AppName}}</td>" +
    "              </tr>" +
    "              <tr>" +
    "                <th>Pipe Name</th>" +
    "                <td>{{PipeName}}</td>" +
    "              </tr>" +
    "            </tbody>" +
    "          </table>" +
    "        </div>" +
    "      </div>" +
    "    {{/each}}" +
    "  </div>" +    
    "</div>";

    CFE_SB_ROUTEDATA_Rpt = Handlebars.compile(CFE_SB_ROUTEDATA_Template);
  
    Handlebars.registerHelper('routedata_detail_nav_tabs', function(context) {
      return new Handlebars.SafeString(RouteDataEntryTabs_Rpt(context));
    });
        



    /***************************************************/
    /*                CFE_SB_MAPDATA                 */
    /***************************************************/
    MapDataLogEntryTabs_Template = "" +
    "<ul class='nav nav-tabs tabs-left' id='demo-pill-nav'>" +
    "  {{#each MapData}}" +  
    "    <li>" +
    "      <a href='\#{{TabID}}' data-toggle='tab'><span class='badge bg-color-green txt-color-white'>{{@index}}</span> {{MsgId}}</a>" +
    "    </li>" +
    "  {{/each}}" +
    "</ul>" 

    MapDataEntryTabs_Rpt = Handlebars.compile(MapDataLogEntryTabs_Template);

    CFE_SB_MAPDATA_Template = "" +
      "<table id='{{TableID}}' class='table table-striped table-bordered table-hover'>" +
      "  <thead>" +
      "    <tr>" +
      "      <th style='width: 100px' class='hasinput' >" +
      "        <input style='form-control' type='text' placeholder='Filter MsgID'>" +
      "      </th>" +
      "      <th style='width: 100px' class='hasinput' >" +
      "        <input style='form-control' type='text' placeholder='Filter Route Index'>" +
      "      </th>" +
      "    </tr>" +
      "    <tr>" +
      "      <th>Message ID</th>" +
      "      <th>Route Index</th>" +
      "    </tr>" +
      "  <tbody>" +
      "    {{#each MapData}}" +
      "      <tr>" +
      "        <td>{{MsgId}}</td>" +
      "        <td>{{RouteIndex}}</td>" +
      "      </tr>" +
      "    {{/each}}" +
      "  </tbody>" +
      "</table>";     

    CFE_SB_MAPDATA_Rpt = Handlebars.compile(CFE_SB_MAPDATA_Template);
  
        

    /***************************************************/
    /*                 CFE_ES_CDS_REG                  */
    /***************************************************/
    CdsRegEntryTabs_Template = "" +
    "<ul class='nav nav-tabs tabs-left' id='demo-pill-nav'>" +
    "  {{#each MapData}}" +  
    "    <li>" +
    "      <a href='\#{{TabID}}' data-toggle='tab'><span class='badge bg-color-green txt-color-white'>{{@index}}</span> {{Name}}</a>" +
    "    </li>" +
    "  {{/each}}" +
    "</ul>" 

    CdsRegEntryTabs_Rpt = Handlebars.compile(CdsRegEntryTabs_Template);

    CFE_ES_CDS_REG_Template = "" +
      "<table id='{{TableID}}' class='table table-striped table-bordered table-hover'>" +
      "  <thead>" +
      "    <tr>" +
      "      <th style='width: 100px' class='hasinput' >" +
      "        <input style='form-control' type='text' placeholder='Filter MsgID'>" +
      "      </th>" +
      "      <th style='width: 100px' class='hasinput' >" +
      "        <input style='form-control' type='text' placeholder='Filter Route Index'>" +
      "      </th>" +
      "    </tr>" +
      "    <tr>" +
      "      <th>Name</th>" +
      "      <th>Size</th>" +
      "      <th>Handle</th>" +
      "      <th>Is Table</th>" +
      "    </tr>" +
      "  <tbody>" +
      "    {{#each CdsRegData}}" +
      "      <tr>" +
      "        <td>{{Name}}</td>" +
      "        <td>{{Size}}</td>" +
      "        <td>{{Handle}}</td>" +
      "        <td>{{Table}}</td>" +
      "      </tr>" +
      "    {{/each}}" +
      "  </tbody>" +
      "</table>";     

    CFE_ES_CDS_REG_Rpt = Handlebars.compile(CFE_ES_CDS_REG_Template);
  
        

    /***************************************************/
    /*                CFE_ES_TASK_INFO                 */
    /***************************************************/
    CFE_ES_TASKINFO_Template = "" +
      "<table id='{{TableID}}' class='table table-striped table-bordered table-hover'>" +
      "  <thead>" +
      "    <tr>" +
      "      <th style='width: 100px' class='hasinput' >" +
      "        <input style='form-control' type='text' placeholder='Filter TaskName'>" +
      "      </th>" +
      "      <th style='width: 100px' class='hasinput' >" +
      "        <input style='form-control' type='text' placeholder='Filter App Name'>" +
      "      </th>" +
      "      <th style='width: 100px' class='hasinput' >" +
      "        <input style='form-control' type='text' placeholder='Filter App ID'>" +
      "      </th>" +
      "      <th></th>" +
      "    </tr>" +
      "    <tr>" +
      "      <th>Task Name</th>" +
      "      <th>App Name</th>" +
      "      <th>App ID</th>" +
      "      <th>Exec Counter</th>" +
      "    </tr>" +
      "  <tbody>" +
      "    {{#each TaskInfoData}}" +
      "      <tr>" +
      "        <td>{{TaskName}}</td>" +
      "        <td>{{AppName}}</td>" +
      "        <td>{{AppId}}</td>" +
      "        <td>{{ExecutionCounter}}</td>" +
      "      </tr>" +
      "    {{/each}}" +
      "  </tbody>" +
      "</table>";     

    CFE_ES_TASKINFO_Rpt = Handlebars.compile(CFE_ES_TASKINFO_Template);
    
    
    
    /***************************************************/
    /*                CFE_EVS_APPDATA_INFO                 */
    /***************************************************/
    CFE_EVS_APPDATA_Template = "" +
      "<div class='panel-group smart-accordion-default' id='{{AccordionID}}'" +
      "  {{#each AppData}}" +
      "    <div class='panel panel-default'>" +
      "      <div class='panel-heading'>" +
      "        <h4 class='panel-title'><a data-toggle='collapse' data-parent='\#{{../AccordionID}}' href='\#{{CollapseID}}' {{#unless @first}} class='collapsed'{{/unless}}> <i class='fa fa-fw fa-plus-circle txt-color-green'></i> <i class='fa fa-fw fa-minus-circle txt-color-red'></i> {{AppName}} </a></h4>" +
      "      </div>" +
      "      <div id='{{CollapseID}}' class='panel-collapse collapse in'>" +
      "        <div class='table-responsive'>" +
      "          <table class='table table-condensed'>" +
      "            <tbody>" +
      "              <tr>" +
      "                <th width='150px'>Active</th>" +
      "                <td>{{ActiveFlag}}</td>" +
      "              </tr>" +
      "              <tr>" +
      "                <th width='150px'>Critical Enabled</th>" +
      "                <td>{{CriticalActive}}</td>" +
      "              </tr>" +
      "              <tr>" +
      "                <th width='150px'>Error Enabled</th>" +
      "                <td>{{ErrorActive}}</td>" +
      "              </tr>" +
      "              <tr>" +
      "                <th width='150px'>Info Enabled</th>" +
      "                <td>{{InfoActive}}</td>" +
      "              </tr>" +
      "              <tr>" +
      "                <th width='150px'>Debug Enabled</th>" +
      "                <td>{{DebugActive}}</td>" +
      "              </tr>" +
      "              <tr>" +
      "                <th width='150px'>Event Count</th>" +
      "                <td>{{EventCount}}</td>" +
      "              </tr>" +
      "              <tr>" +
      "                <th width='150px'>Filters</th>" +
      "                <td>" +
      "                  <table id='{{TableID}}' class='table table-striped table-bordered table-hover'>" +
      "                    <thead>" +
      "                      <tr>" +
      "                        <th style='width: 100px' class='hasinput' >" +
      "                          <input style='form-control' type='text' placeholder='Filter Event ID'>" +
      "                        </th>" +
      "                        <th style='width: 100px' class='hasinput' >" +
      "                          <input style='form-control' type='text' placeholder='Filter Mask'>" +
      "                        </th>" +
      "                        <th></th>" +
      "                      </tr>" +
      "                      <tr>" +
      "                        <th>Event ID</th>" +
      "                        <th>Mask</th>" +
      "                        <th>Count</th" +
      "                      </tr>" +
      "                    </thead>" +
      "                    <tbody>" +
      "                      {{#each Filters}}" +
      "                        <tr>" +
      "                          <td>{{EventID}}</td>" +
      "                          <td>{{Mask}}</td>" +
      "                          <td>{{Count}}</td>" +
      "                        </tr>" +
      "                      {{/each}}" +
      "                    </tbody>" +
      "                  </table>" +
      "                </td>" +
      "              </tr>" +
      "            </tbody>" +
      "          </table>" +
      "        </div>" +
      "      </div>" +
      "    </div>" +
      "  {{/each}}" +
      "</div>";
      
    CFE_EVS_APPDATA_Rpt = Handlebars.compile(CFE_EVS_APPDATA_Template);